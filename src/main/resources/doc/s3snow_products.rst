.. |vspace| raw:: latex

   \vspace{5mm}

.. |br| raw:: html

   <br />

.. index:: S3-SNOW Products
.. _s3snow_products:

====================
The S3-SNOW Products
====================

Overview
========

This section will give an overview of all input, intermediate and final products used and generated by the SNAP
S3-SNOW processors introduced in the previous chapter.


.. index:: Input Products

Input Products
==============

OLCI L1b TOA Radiance Products
------------------------------

Both reduced and full resolution OLCI L1b TOA radiance products can
be used as input data. Table :numref:`olci_bands_l1b` to :numref:`olci_l1b_flag_coding` give an overview of
OLCI L1b bands, tie point grids and L1b flag coding, respectively. A more detailed description of the OLCI
standard L1b product is given in [`3 <intro.html#References>`_].

|vspace| |br|

.. _olci_bands_l1b:
.. table:: OLCI bands in L1b product

    +----------------------------------+---------------------+------------+---------------------------------+
    |     **Name in product**          |       **Unit**      |   **Type** |        **Description**          |
    +==================================+=====================+============+=================================+
    | Oa<nn>_radiance; n=01,..,21      | mW/(m^2*sr*nm)      | float32    | TOA radiance in band <nn>       |
    +----------------------------------+---------------------+------------+---------------------------------+
    | lambda0_band_<nn>; n=01,..,21    | mW/(m^2*sr*nm)      | float32    | Central wavelength in band <nn> |
    +----------------------------------+---------------------+------------+---------------------------------+
    | FWHM_band_<nn>; n=01,..,21       | mW/(m^2*sr*nm)      | float32    | Bandwidth in band <nn>          |
    +----------------------------------+---------------------+------------+---------------------------------+
    | solar_flux_band_<nn>; n=01,..,21 | mW/(m^2*sr*nm)      | float32    | Solar flux in band <nn>         |
    +----------------------------------+---------------------+------------+---------------------------------+
    |       quality_flags              | dl (flag band)      | int32      | Quality flags                   |
    +----------------------------------+---------------------+------------+---------------------------------+
    |    altitude                      |        m            | float32    | Altitude                        |
    +----------------------------------+---------------------+------------+---------------------------------+
    |    latitude                      |        degrees      | float32    | Latitude                        |
    +----------------------------------+---------------------+------------+---------------------------------+
    |    longitude                     |        degrees      | float32    | Longitude                       |
    +----------------------------------+---------------------+------------+---------------------------------+
    |    frame_offset                  |        dl           | float32    | Resampling frame offset         |
    +----------------------------------+---------------------+------------+---------------------------------+
    |    detector_index                |        dl           | float32    | Detector index                  |
    +----------------------------------+---------------------+------------+---------------------------------+

|vspace| |br|

.. _olci_instrument_channels:
.. table:: OLCI instrument channels.

    +-------------------------------+------------------------------+
    | **Channel**                   | **Wavelength**               |
    +===============================+==============================+
    | 1                             | 400.0                        |
    +-------------------------------+------------------------------+
    | 2                             | 412.5                        |
    +-------------------------------+------------------------------+
    | 3                             | 442.5                        |
    +-------------------------------+------------------------------+
    | 4                             | 490                          |
    +-------------------------------+------------------------------+
    | 5                             | 510                          |
    +-------------------------------+------------------------------+
    | 6                             | 560                          |
    +-------------------------------+------------------------------+
    | 7                             | 620                          |
    +-------------------------------+------------------------------+
    | 8                             | 665                          |
    +-------------------------------+------------------------------+
    | 9                             | 673.75                       |
    +-------------------------------+------------------------------+
    | 10                            | 681.25                       |
    +-------------------------------+------------------------------+
    | 11                            | 708.75                       |
    +-------------------------------+------------------------------+
    | 12                            | 753.75                       |
    +-------------------------------+------------------------------+
    | 13                            | 761.25                       |
    +-------------------------------+------------------------------+
    | 14                            | 764.375                      |
    +-------------------------------+------------------------------+
    | 15                            | 767.5                        |
    +-------------------------------+------------------------------+
    | 16                            | 778.75                       |
    +-------------------------------+------------------------------+
    | 17                            | 865                          |
    +-------------------------------+------------------------------+
    | 18                            | 885                          |
    +-------------------------------+------------------------------+
    | 19                            | 900                          |
    +-------------------------------+------------------------------+
    | 20                            | 940                          |
    +-------------------------------+------------------------------+
    | 21                            | 1020                         |
    +-------------------------------+------------------------------+


|vspace| |br|

.. _olci_tpgs:
.. table:: OLCI tie point grids in L1b product.

    +-----------------------------+----------+--------------+-----------------------------------------------+
    | **Name in product**         | **Unit** |   **Type**   |        **Description**                        |
    +=============================+==========+==============+===============================================+
    | TP_latitude                 |   deg    |   float32    | Latitude of the tie points                    |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | TP_longitude                |   deg    |   float32    | Longitude of the tie points                   |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | SZA                         |   deg    |   float32    | Sun zenith angle                              |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | SAA                         |   deg    |   float32    | Sun azimuth angle                             |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | OZA                         |   deg    |   float32    | View zenith angle                             |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | OAA                         |   deg    |   float32    | View azimuth angle                            |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | horizontal_wind_vector_1    |   m/s    |   float32    | Zonal wind component                          |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | horizontal_wind_vector_2    |   m/s    |   float32    | Meridional wind component                     |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | total_columnar_water_vapour |   kg/m^2 |   float32    | Total column of water vapour                  |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | sea_level_pressure          |   hPa    |   float32    | Mean sea level pressure                       |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | ozone                       |   kg/m^2 |   float32    | Total ozone                                   |
    +-----------------------------+----------+--------------+-----------------------------------------------+
    | humidity                    |   %      |   float32    | Relative humidity                             |
    +-----------------------------+----------+--------------+-----------------------------------------------+

|vspace| |br|

.. _olci_l1b_flag_coding:
.. table:: OLCI L1b flag coding.

    +-------------------------------+------------------------------+-------------------------------+
    | **Bit**                       | **Flag**                     | **Description**               |
    +===============================+==============================+===============================+
    | 0-20                          | saturated_Oa<21-nn>          | Band <nn> is saturated        |
    +-------------------------------+------------------------------+-------------------------------+
    | 21                            | dubious                      | Pixel is cosmetic             |
    +-------------------------------+------------------------------+-------------------------------+
    | 22                            | sun_glint_risk               | Pixel has been duplicated     |
    +-------------------------------+------------------------------+-------------------------------+
    | 23                            | duplicated                   | Pixel has glint risk          |
    +-------------------------------+------------------------------+-------------------------------+
    | 24                            | cosmetic                     | Pixel is suspect              |
    +-------------------------------+------------------------------+-------------------------------+
    | 25                            | invalid                      | Pixel is over land,           |
    +-------------------------------+------------------------------+-------------------------------+
    | 26                            | straylight_risk              | Pixel is bright               |
    +-------------------------------+------------------------------+-------------------------------+
    | 27                            | bright                       | Pixel is part of a coastline  |
    +-------------------------------+------------------------------+-------------------------------+
    | 28                            | tidal_region                 | Pixel is suspect              |
    +-------------------------------+------------------------------+-------------------------------+
    | 29                            | fresh_inland_water           | Pixel is over land,           |
    +-------------------------------+------------------------------+-------------------------------+
    | 30                            | coastline                    | Pixel is bright               |
    +-------------------------------+------------------------------+-------------------------------+
    | 31                            | land                         | Pixel is part of a coastline  |
    +-------------------------------+------------------------------+-------------------------------+


|vspace| |br|


SNAP IdePix Classification Products
-----------------------------------


The IdePix classification product is the result of the pixel classification performed on the OLCI L1b
product. In return, the IdePix product can be used as optional input for Snow Properties Processor.
The IdePix OLCI version for S3-SNOW provides an 'extended' classification product containing the bands
listed in :numref:`idepix_bands`.

.. _idepix_bands:
.. table:: Bands in IdePix pixel classification product

    +-------------------------+---------------------+------------+----------------------------------------------------------+
    |     **Name in product** |       **Unit**      |   **Type** |        **Description**                                   |
    +=========================+=====================+============+==========================================================+
    | Oa21_reflectance        | dl                  | float32    | TOA reflectance for band 21                              |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | trans_13                | dl                  | float32    | Rectified and desmiled transmission for band 13          |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | press_13                | hPa                 | float32    | Pressure for band 13 neglecting scattering               |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | surface_13              | dl                  | float32    | Rectified transmission for band 13 neglecting scattering |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | surface_pressure        | hPa                 | float32    | Pressure at altitude of the surface                      |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | altitude                | m                   | float32    | Altitude of the surface (from DEM or L1b product)        |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | cloud_over_snow         |        dl           | float32    | Mask band indicating if there is cloud over snow         |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | pixel_classif_flags     |        dl           | int16      | Standard IdePix classification flag band                 |
    +-------------------------+---------------------+------------+----------------------------------------------------------+
    | quality_flags           |        dl           | int32      | Standard IdePix classification flag band                 |
    +-------------------------+---------------------+------------+----------------------------------------------------------+


The IdePix OLCI classification flag coding is given in :numref:`idepix_flagcoding`.

.. _idepix_flagcoding:
.. table:: Bands in IdePix pixel classification product


    +------------+------------------------+-------------------------------------------------------------+
    | **Bit**    | **Flag**               | **Description**                                             |
    +============+========================+=============================================================+
    | 0          | IDEPIX_INVALID         | Pixel is invalid                                            |
    +------------+------------------------+-------------------------------------------------------------+
    | 1          | IDEPIX_CLOUD           | Pixel is either 'cloud sure' or 'cloud ambiguous'           |
    +------------+------------------------+-------------------------------------------------------------+
    | 2          | IDEPIX_CLOUD_AMBIGUOUS | Semi-transparent clouds, or cloud detection is uncertain    |
    +------------+------------------------+-------------------------------------------------------------+
    | 3          | IDEPIX_CLOUD_SURE      | Fully opaque clouds with full confidence of their detection |
    +------------+------------------------+-------------------------------------------------------------+
    | 4          | IDEPIX_CLOUD_BUFFER    | A buffer of N pixels (user option) around a cloud           |
    +------------+------------------------+-------------------------------------------------------------+
    | 5          | IDEPIX_CLOUD_SHADOW    | Pixel is affected by a cloud shadow                         |
    +------------+------------------------+-------------------------------------------------------------+
    | 6          | IDEPIX_SNOW_ICE        | Snow or ice pixel                                           |
    +------------+------------------------+-------------------------------------------------------------+
    | 7          | IDEPIX_BRIGHT          | Pixel is bright                                             |
    +------------+------------------------+-------------------------------------------------------------+
    | 8          | IDEPIX_WHITE           | Pixel is white                                              |
    +------------+------------------------+-------------------------------------------------------------+
    | 9          | IDEPIX_COASTLINE       | Pixel is part of a coastline                                |
    +------------+------------------------+-------------------------------------------------------------+
    | 10         | IDEPIX_LAND            | Land pixel                                                  |
    +------------+------------------------+-------------------------------------------------------------+

|vspace| |br|

.. index:: Final Products

Final Products
==============

Snow Properties Product
-----------------------

The S3-SNOW final product contain various snow properties, depending on the processing paramaters specified by the user.
The maximum number of bands which can be generated is given in :numref:`snowprop_bands`.
For more detailed explanations of the physical meaning of the parameters, see [`2 <intro.html#References>`_].

.. _snowprop_bands:
.. table:: Bands in final S3-SNOW snow properties product

    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |     **Name in product**          |       **Unit**      |   **Type** |        **Description**                                 |
    +==================================+=====================+============+========================================================+
    |   albedo_bb_spherical_vis        | dl                  | float32    | Spherical albedo in broadband visible range            |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   albedo_bb_spherical_nir        | dl                  | float32    | Spherical albedo in broadband near infrared range      |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   albedo_bb_spherical_sw         | dl                  | float32    | Spherical albedo in broadband shortwave range          |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   albedo_bb_planar_vis           | dl                  | float32    | Planar albedo in broadband visible range               |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   albedo_bb_planar_nir           | dl                  | float32    | Planar albedo in broadband near infrared range         |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   albedo_bb_planar_sw            | dl                  | float32    | Planar albedo in broadband shortwave range             |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   albedo_spectral_spherical_<nn> | dl                  | float32    | Spectral spherical albedo in band <nn> (max. 21 bands) |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   albedo_spectral_planar_<nn>    | dl                  | float32    | Spectral planar albedo in band <nn> (max. 21 bands)    |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   rBRR_<nn>                      | dl                  | float32    | BRR in band <nn> (max. 21 bands)                       |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   ppa_spectral_<nn>              | dl                  | float32    | PPA in band <nn> (max. 21 bands)                       |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   grain_diameter                 | mm                  | float32    | Snow grain diameter                                    |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   snow_specific_area             | km2                | float32    | Snow specific area                                     |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   ice_indicator                  | dl                  | float32    | Ice indicator                                          |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   pollution_mask                 | dl                  | float32    | Pollution mask                                         |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   f                              | dl                  | float32    | Snow impurity absorption coefficient                   |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   l                              | dl                  | float32    | Effective absorption length                            |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   m                              | dl                  | float32    | Absorption Angstrom parameter                          |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   r_0                            | dl                  | float32    | Reflectance of nonabsorbing snow layer                 |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   f_rel_err                      | dl                  | float32    | Relative error of parameter f                          |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   l_rel_err                      | dl                  | float32    | Relative error of parameter l                          |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   m_rel_err                      | dl                  | float32    | Relative error of parameter m                          |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   r_0_rel_err                    | dl                  | float32    | Relative error of parameter r_0                        |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   ndsi                           | dl                  | float32    | NDSI                                                   |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   ndsi_mask                      | dl                  | float32    | NDSI mask for snow identification                      |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   quality_flags                  | dl                  | int16      | L1b quality flags                                      |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+
    |   pixel_classif_flags            | dl                  | int16      | Pixel classification flags                             |
    +----------------------------------+---------------------+------------+--------------------------------------------------------+


|vspace| |br|







